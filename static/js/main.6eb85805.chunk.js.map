{"version":3,"sources":["App.module.css","components/Modal/Modal.module.css","components/ImageGalleryItem/ImageGalleryItem.module.css","components/Button/Button.module.css","components/ImageGallery/ImageGallery.module.css","API-services/ApiService.js","components/Button/Button.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","components/Modal/Modal.jsx","components/ImageGallery/ImageGallery.jsx","components/Searchbar/SearchBar.jsx","App.js","index.js","components/Searchbar/SearchBar.module.css"],"names":["module","exports","ApiService","this","API_KEY","API_PATH","searchQuery","queryPage","perPage","query","split","join","fetch","Button","onClick","className","s","type","ImageGalleryItem","onImageClick","props","image","src","webformatURL","alt","tags","PureComponent","modalRoot","document","querySelector","Modal","closeModalHandler","e","closeModal","code","target","currentTarget","window","addEventListener","removeEventListener","createPortal","Overlay","largeImageURL","Component","ImageGallery","state","largeImage","setState","onCloseModal","images","map","SearchBar","onInputChange","evt","value","onSubmit","preventDefault","trim","toast","error","Searchbar","SearchForm","button","buttonLabel","input","autoComplete","autoFocus","placeholder","onChange","apiService","App","status","onLoadMoreBtnClick","incrementQueryPage","fetchImages","setQuery","newQquery","prevProps","prevState","resetQueryPage","scrollTo","top","documentElement","scrollHeight","behavior","then","response","json","hits","length","Promise","reject","Error","catch","position","autoClose","transition","Slide","noImagesFoundWarn","Loader","color","height","width","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.6eb85805.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__16ZpL\",\"noImagesFoundWarn\":\"App_noImagesFoundWarn__8eBZe\",\"Loader\":\"App_Loader__12yUz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__2AxMb\",\"Modal\":\"Modal_Modal__2WBTT\",\"image\":\"Modal_image__1cHuD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__3CvRl\",\"image\":\"ImageGalleryItem_image__2xsbt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__3R1xi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__DncjJ\"};","export default class ApiService {\n  constructor() {\n    this.API_KEY = '19115402-2f4ed690e134b4c839000dec3';\n    this.API_PATH = 'https://pixabay.com/api/';\n    this.searchQuery = '';\n    this.queryPage = 1;\n    this.perPage = 12;\n  }\n  fetchImages(query) {\n    let { API_PATH, API_KEY, searchQuery, queryPage, perPage } = this;\n    searchQuery = query.split(' ').join('+');\n    return fetch(\n      `${API_PATH}?key=${API_KEY}&q=${searchQuery}&page=${queryPage}&per_page=${perPage}`,\n    );\n  }\n  incrementQueryPage() {\n    this.queryPage += 1;\n  }\n  resetQueryPage() {\n    this.queryPage = 1;\n  }\n}\n","import React from 'react';\nimport s from './Button.module.css';\nimport PropTypes from 'prop-types';\n\nexport default function Button({ onClick }) {\n  return (\n    <button className={s.Button} type=\"button\" onClick={onClick}>\n      Load more\n    </button>\n  );\n}\n\nButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport s from './ImageGalleryItem.module.css';\nimport { PureComponent } from 'react';\n\nexport default class ImageGalleryItem extends PureComponent {\n  static propTypes = {\n    image: PropTypes.shape({\n      webformatURL: PropTypes.string.isRequired,\n      tags: PropTypes.string.isRequired,\n    }),\n    onImageClick: PropTypes.func.isRequired,\n  };\n\n  onClick = () => {\n    const { onImageClick } = this.props;\n    onImageClick(this.props.image);\n  };\n\n  render() {\n    const { image } = this.props;\n    return (\n      <li className={s.ImageGalleryItem}>\n        <img\n          className={s.image}\n          src={image.webformatURL}\n          alt={image.tags}\n          onClick={this.onClick}\n        />\n      </li>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { createPortal } from 'react-dom';\n\nimport s from './Modal.module.css';\n\nconst modalRoot = document.querySelector('#portal-root');\n\nexport default class Modal extends Component {\n  static propTypes = {\n    image: PropTypes.shape({\n      largeImageURL: PropTypes.string,\n      tags: PropTypes.string,\n    }),\n    closeModal: PropTypes.func.isRequired,\n  };\n  componentDidMount() {\n    window.addEventListener('keydown', this.closeModalHandler);\n  }\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.closeModalHandler);\n  }\n  closeModalHandler = e => {\n    const { closeModal } = this.props;\n    if (e.code === 'Escape' || e.target === e.currentTarget) {\n      closeModal();\n    }\n  };\n\n  render() {\n    const { image } = this.props;\n    return createPortal(\n      <div className={s.Overlay} onClick={this.closeModalHandler}>\n        <div className={s.Modal}>\n          <img className={s.image} src={image.largeImageURL} alt={image.tags} />\n        </div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\nimport { createPortal } from 'react-dom/cjs/react-dom.development';\n\nimport s from './ImageGallery.module.css';\nimport ImageGalleryItem from '../ImageGalleryItem';\nimport Modal from '../Modal';\n\nconst modalRoot = document.querySelector('#portal-root');\n\nexport default class ImageGallery extends PureComponent {\n  static propTypes = {\n    images: PropTypes.arrayOf(PropTypes.object).isRequired,\n  };\n\n  state = {\n    largeImage: null,\n  };\n  onImageClick = largeImage => {\n    this.setState({\n      largeImage: largeImage,\n    });\n  };\n  onCloseModal = () => {\n    this.setState({ largeImage: null });\n  };\n  render() {\n    const { images } = this.props;\n    const { largeImage } = this.state;\n    return (\n      <>\n        <ul className={s.ImageGallery}>\n          {images.map(image => (\n            <ImageGalleryItem\n              image={image}\n              key={image.webformatURL}\n              onImageClick={this.onImageClick}\n            />\n          ))}\n        </ul>\n        {largeImage &&\n          createPortal(\n            <Modal image={largeImage} closeModal={this.onCloseModal} />,\n            modalRoot,\n          )}\n      </>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { toast } from 'react-toastify';\nimport s from './SearchBar.module.css';\nexport default class SearchBar extends Component {\n  state = {\n    searchQuery: '',\n  };\n  static propTypes = {\n    onSubmit: PropTypes.func.isRequired,\n  };\n  onInputChange = evt => {\n    this.setState({\n      searchQuery: evt.target.value,\n    });\n  };\n  onSubmit = evt => {\n    const { searchQuery } = this.state;\n    const { onSubmit } = this.props;\n\n    evt.preventDefault();\n\n    if (searchQuery.trim() === '') {\n      return toast.error('Please, input search query');\n    }\n    onSubmit(searchQuery);\n  };\n  render() {\n    const { searchQuery } = this.state;\n    return (\n      <header className={s.Searchbar}>\n        <form className={s.SearchForm} onSubmit={this.onSubmit}>\n          <button type=\"submit\" className={s.button}>\n            <span className={s.buttonLabel}>Search</span>\n          </button>\n          <input\n            className={s.input}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            value={searchQuery}\n            onChange={this.onInputChange}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\n// import { createPortal } from 'react-dom';\nimport { ToastContainer, Slide } from 'react-toastify';\nimport PropTypes from 'prop-types';\nimport 'react-toastify/dist/ReactToastify.css';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport s from './App.module.css';\nimport ApiService from './API-services/';\nimport Button from './components/Button';\nimport ImageGallery from './components/ImageGallery';\nimport Loader from 'react-loader-spinner';\nimport SearchBar from './components/Searchbar';\n\nconst apiService = new ApiService();\n// const loaderRoot = document.querySelector('#portal-root');\n\nclass App extends PureComponent {\n  static propTypes = {\n    searchQuery: PropTypes.string,\n  };\n  state = {\n    error: null,\n    images: [],\n    searchQuery: '',\n    status: 'idle',\n  };\n  componentDidUpdate(prevProps, prevState) {\n    if (this.state.searchQuery !== prevState.searchQuery) {\n      this.setState({ images: [] });\n      apiService.resetQueryPage();\n      this.fetchImages();\n    }\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: 'smooth',\n    });\n  }\n  fetchImages() {\n    const { searchQuery } = this.state;\n    this.setState({ status: 'pending' });\n    apiService\n      .fetchImages(searchQuery)\n      .then(response => response.json())\n      .then(response => {\n        if (response.hits.length === 0) {\n          return Promise.reject(new Error(`No ${searchQuery} images found`));\n        }\n        this.setState(prevState => ({\n          images: [...prevState.images, ...response.hits],\n          status: 'resolved',\n        }));\n      })\n      .catch(error => this.setState({ error, status: 'error' }));\n  }\n\n  onLoadMoreBtnClick = () => {\n    apiService.incrementQueryPage();\n    this.fetchImages();\n  };\n\n  setQuery = newQquery => {\n    this.setState({ searchQuery: newQquery });\n  };\n\n  render() {\n    const { images, searchQuery, status } = this.state;\n    const { onLoadMoreBtnClick, setQuery } = this;\n    return (\n      <div className={s.App}>\n        <ToastContainer\n          position=\"top-center\"\n          autoClose={2500}\n          transition={Slide}\n        />\n        <SearchBar onSubmit={setQuery} />\n        {status === 'error' && (\n          <b className={s.noImagesFoundWarn}>no {searchQuery} images found</b>\n        )}\n        {images.length > 0 && <ImageGallery images={images} />}\n        {status === 'pending' && (\n          <Loader\n            className={s.Loader}\n            type=\"ThreeDots\"\n            color=\"#3f51b5\"\n            height={40}\n            width={40}\n          />\n        )}\n        {status === 'resolved' && images.length % 12 === 0 && (\n          <Button onClick={onLoadMoreBtnClick} />\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"SearchBar_Searchbar__LuSsJ\",\"SearchForm\":\"SearchBar_SearchForm__1OsD8\",\"button\":\"SearchBar_button__1AsWZ\",\"buttonLabel\":\"SearchBar_buttonLabel__2mFrQ\",\"input\":\"SearchBar_input__dWgLv\"};"],"sourceRoot":""}